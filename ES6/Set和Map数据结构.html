<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Set和Map数据结构</title>
</head>
<body>
<script>
    /*ES6 提供了新的数据结构 Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。
     Set 本身是一个构造函数，用来生成 Set 数据结构。*/

    //    扩展运算符和Set结构相结合，就可以去除数组的重复成员。
    const arr = [1, 2, 3, 4, 1, 1, 3, 4, 21, 1];
    console.log([...new Set(arr)]); //数组去重

    //另外，两个对象总是不相等的。
    const set = new Set();
    set.add({});
    set.add({});
    console.log(set.size);

    let s = new Set();
    s.add(1).add(2).add(2);
    // 注意2被加入了两次

    console.log(s.size); // 2

    s.has(1); // true
    s.has(2); // true
    s.has(3); // false

    s.delete(2);
    s.has(2); // false

    //    keys()：返回键名的遍历器
    //    values()：返回键值的遍历器
    //    entries()：返回键值对的遍历器
    //    forEach()：使用回调函数遍历每个成员

    //    由于 Set 结构没有键名，只有键值（或者说键名和键值是同一个值），所以keys方法和values方法的行为完全一致。
    let test = new Set(['red', 'blue', 'pink', 'yellow']);

    for (let item of test.keys()) {
        console.log(item);
    }

    for (let item of test.values()) {
        console.log(item);
    }

    for (let item of test.entries()) {
        console.log(item);
    }

    console.log(Array.from(test));

    for (i of test) {
        console.log(i);
    }

    //    而且，数组的map和filter方法也可以用于Set了。
    let set2 = new Set([1, 2, 3, 4, 5, 6, 7, 8]);
    console.log([...set2].map(x => x * 2));
    console.log([...set2].filter(x => x % 2));

    //    因此使用Set可以很容易地实现并集（Union）、交集（Intersect）和差集（Difference）。
    let a = new Set([1, 2, 3]);
    let b = new Set([4, 3, 2]);

    // 并集
    let union = new Set([...a, ...b]);
    console.log(union);
    // Set {1, 2, 3, 4}

    // 交集
    let intersect = new Set([...a].filter(x => b.has(x)));
    console.log(intersect);
    // set {2, 3}

    // 差集
    let difference = new Set([...a].filter(x => !b.has(x)));
    console.log(difference);
    // Set {1}

</script>
</body>
</html>